@startuml Class Diagram - Core Architecture (Simple)

!theme plain
skinparam classAttributeIconSize 0
skinparam backgroundColor #FFFFFF

title Game Engine - Class Diagram (Simplified)

class World {
    - systems: System[]
    - pixi: Pixi
    - three: Three
    - lastTime: number
    --
    + init(options): Promise<void>
    + run(): void
    + update(dt: number): void
    + render(): void
    + addSystem(system: System): void
    + removeSystem(system: System): void
    + initSystems(): Promise<void>
}

class System {
    --
    + init(): Promise<void>
    + update(dt: number): void
}

class Entity2D {
    - components: Component[]
    - behaviours: Behaviour[]
    - transform: Transform2D
    - container: Container
    - renderer: Sprite
    - activeSelf: boolean
    --
    + init(): Promise<void>
    + add(component: Component): Component
    + get(component: Class): Component
    + remove(component: string): void
    + setActive(active: boolean): void
}

class Component {
    - _enabled: boolean
    - entity: Entity2D
    --
    + init(): Promise<void>
    + create(entity: Entity2D): void
    + get enabled(): boolean
    + set enabled(value: boolean): void
    + _onEnable(): void
    + _onDisable(): void
    + _onDestroy(): void
}

' Relationships
World "1" *-- "0..*" System : manages
Entity2D "1" *-- "0..*" Component : contains
Component "0..*" --> "1" Entity2D : belongs to

note right of World
  **World**
  - Quản lý game loop
  - Điều phối systems
  - Update/Render cycle
end note

note right of System
  **System**
  - Xử lý logic nghiệp vụ
  - Update mỗi frame
  - Tự đăng ký với World
end note

note left of Entity2D
  **Entity2D**
  - Container cho components
  - Quản lý lifecycle
  - Active/Inactive state
end note

note left of Component
  **Component**
  - Mở rộng chức năng Entity
  - Có thể đăng ký với Systems
  - Lifecycle hooks
end note

@enduml


