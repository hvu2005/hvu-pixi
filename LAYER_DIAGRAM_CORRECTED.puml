@startuml Layer Diagram - Corrected Architecture

!theme plain
skinparam componentStyle rectangle
skinparam linetype ortho
skinparam backgroundColor #FFFFFF
skinparam defaultFontSize 14

title Game Engine Backend - Layer Architecture (Corrected)

package "Layer 5: App" #LightBlue {
    component [App\n(pixi, three)] as App
}

package "Layer 4: World" #LightGreen {
    component [World\nGame Loop\nOrchestrator] as World
}

package "Layer 3: System" #LightYellow {
    component [System\nProcessing Logic] as System
}

package "Layer 2: Entity" #LightCoral {
    component [Entity\nComponent Container] as Entity
}

package "Layer 1: Component" #LightPink {
    component [Component\nFunctionality] as Component
}

' Dependency/Usage relationships (bottom depends on top)
Component --> Entity : belongs to\n(has reference)
Entity --> System : processed by\n(components register)
System --> World : managed by\n(auto-registers)
World --> App : initialized by\n(used by)

note top of App
  **Application Layer**
  - Entry point (index.js)
  - Initializes World
  - Integrates rendering (Pixi/Three)
end note

note right of World
  **World Layer**
  - Manages Systems
  - Game loop (update/render)
  - Coordinates everything
end note

note right of System
  **System Layer**
  - Processes Components
  - Domain-specific logic
  - Update per frame
end note

note bottom of Entity
  **Entity Layer**
  - Contains Components
  - Manages lifecycle
  - Active/Inactive state
end note

note bottom of Component
  **Component Layer**
  - Extends Entity
  - Registers with Systems
  - Provides functionality
end note

@enduml


